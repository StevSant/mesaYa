# =============================================================================
# MesaYA - Docker Compose Principal (Orquestador)
# =============================================================================
# Este archivo orquesta toda la infraestructura de MesaYA usando módulos.
# Cada servicio tiene su propia configuración en ./infrastructure/
#
# Uso:
#   docker compose up -d              # Levantar toda la infraestructura
#   docker compose up -d kafka        # Levantar solo Kafka
#   docker compose up -d n8n          # Levantar solo n8n
#   docker compose down               # Detener todo
#   docker compose --profile ui up -d # Incluir UIs de desarrollo
#
# Estructura modular:
#   ./infrastructure/kafka/   → Configuración completa de Apache Kafka
#   ./infrastructure/n8n/     → Configuración completa de n8n
#
# Los microservicios (NestJS, Go, Python) se levantan por separado
# usando las tasks de VS Code en .vscode/tasks.json
# =============================================================================

# -----------------------------------------------------------------------------
# Incluir módulos de infraestructura
# -----------------------------------------------------------------------------
include:
  - path: ./infrastructure/kafka/docker-compose.yml
  - path: ./infrastructure/n8n/docker-compose.yml

# -----------------------------------------------------------------------------
# Recursos compartidos (creados por el orquestador)
# Estos recursos son usados por los módulos con external: true
# -----------------------------------------------------------------------------
networks:
  mesaya-network:
    name: mesaya-network
    driver: bridge

volumes:
  mesaya-kafka-data:
    name: mesaya-kafka-data
  mesaya-n8n-data:
    name: mesaya-n8n-data
